(this.webpackJsonpnoteful=this.webpackJsonpnoteful||[]).push([[0],{15:function(e,t,n){"use strict";(function(e){t.a={API_ENDPOINT:"https://rocky-ocean-37641.herokuapp.com/",API_KEY:e.end.REACT_APP_API_KEY}}).call(this,n(28))},42:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),r=n.n(o),c=n(30),s=n.n(c),i=n(16),d=n(18),l=n(12),u=(n(41),n(42),n(26)),h=n(27),j=n(4),f=n(5),m=n(7),b=n(6),p=n(3),v=n(13),O=n(32),N=n(33);n(45);function x(e){e.tag,e.className,e.childrenm;var t=Object(N.a)(e,["tag","className","childrenm"]);return r.a.createElement(e.tag,Object(O.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}x.defaultProps={tag:"a"};var y=r.a.createContext({notes:[],folders:[],addFolder:function(){},addNote:function(){},deleteNote:function(){}}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===t}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return e.folderId===t})).length},k=(n(46),function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.context,t=e.folders,n=void 0===t?[]:t,o=e.notes,r=void 0===o?[]:o;return Object(a.jsxs)("div",{className:"NoteListNav",children:[Object(a.jsx)("ul",{className:"NoteListNav__list",children:n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)(l.c,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id),children:[Object(a.jsx)("span",{className:"NoteListNav__num-notes",children:g(r,e.id)}),e.name]})},e.id)}))}),Object(a.jsx)("div",{className:"NoteListNav__button-wrapper",children:Object(a.jsxs)(x,{tag:l.b,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button",children:[Object(a.jsx)(v.a,{icon:"plus"}),Object(a.jsx)("br",{}),"Folder"]})})]})}}]),n}(r.a.Component));k.contextType=y;n(49);var I=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.context,n=t.notes,o=t.folders,r=this.props.match.params.noteId,c=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((function(t){return t.id===e}))}(o,(_(n,r)||{}).folderId);return Object(a.jsxs)("div",{className:"NotePageNav",children:[Object(a.jsxs)(x,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button",children:[Object(a.jsx)(v.a,{icon:"chevron-left"}),Object(a.jsx)("br",{}),"Back"]}),c&&Object(a.jsx)("h3",{className:"NotePageNav__folder-name",children:c.name})]})}}]),n}(r.a.Component);I.defaultProps={history:{goBack:function(){}},match:{params:{}}},I.contextType=y,I.defaultProps={folders:[],content:"",name:"",error:null};var P=n(60),C=n(15),F=(n(50),function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleClickDelete=function(t){t.preventDefault();var n=e.props.id;fetch("".concat(C.a.API_ENDPOINT,"/notes/").concat(n),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){e.context.deleteNote(n)})).catch((function(e){console.error({error:e})}))},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,o=e.modified;return this.props.id?Object(a.jsxs)("div",{className:"Note",children:[Object(a.jsx)("h2",{className:"Note__title",children:Object(a.jsx)(l.b,{to:"/note/".concat(n),children:t})}),Object(a.jsxs)("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete,children:[Object(a.jsx)(v.a,{icon:"trash-alt"})," ","remove"]}),Object(a.jsx)("div",{className:"Note__dates",children:Object(a.jsxs)("div",{className:"Note__dates-modified",children:["Modified"," ",Object(a.jsx)("span",{className:"Date",children:Object(P.a)(new Date(o),"MMM dd,yyyy")})]})})]}):Object(a.jsx)(p.a,{to:"/"})}}]),n}(r.a.Component));F.defaultProps={onDeleteNote:function(){}},F.contextType=y,F.defaultProps={folders:[],content:"",name:"",error:null};n(51);var D=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=this.context.notes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter((function(e){return e.folderId===t})):e}(void 0===t?[]:t,e);return Object(a.jsxs)("section",{className:"NoteListMain",children:[Object(a.jsx)("ul",{children:n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(F,{id:e.id,name:e.name,modified:e.modified})},e.id)}))}),Object(a.jsx)("div",{className:"NoteListMain__button-container",children:Object(a.jsxs)(x,{tag:l.b,to:"/add-note",type:"button",className:"NoteListMain__add-note-button",children:[Object(a.jsx)(v.a,{icon:"plus"}),Object(a.jsx)("br",{}),"Note"]})})]})}}]),n}(r.a.Component);D.defaultProps={match:{params:{}}},D.contextType=y;n(52);var S=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleDeleteNote=function(t){e.props.history.push("/")},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e,n=this.props.match.params.noteId,o=_(t,n)||{content:""};return Object(a.jsxs)("section",{className:"NotePageMain",children:[Object(a.jsx)(F,{id:o.id,name:o.name,modified:o.modified,onDeleteNote:this.handleDeleteNote}),Object(a.jsx)("div",{className:"NotePageMain__content",children:o.content.split(/\n \r|\n/).map((function(e,t){return Object(a.jsx)("p",{children:e},t)}))})]})}}]),n}(r.a.Component);S.defaultProps={match:{params:{}}},S.contextType=y,S.defaultProps={folders:[],content:"",name:"",error:null};var A=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(f.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(a.jsx)("h2",{children:"Sorry, we could not add this."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.a.Component);var T=function(e){return e.message?Object(a.jsx)("div",{className:"error",children:e.message}):Object(a.jsx)(a.Fragment,{})},E=(n(53),function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={name:{value:"",touched:!1},id:""},a}return Object(f.a)(n,[{key:"updateName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.context.addFolder(this.state.name.value),this.props.history.push("/")}},{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least 3 characters":void 0}},{key:"render",value:function(){var e=this,t=this.validateName();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("form",{className:"newFolder",onSubmit:function(t){return e.handleSubmit(t)},children:Object(a.jsxs)(A,{children:[Object(a.jsx)("h2",{children:"Create a new folder"}),Object(a.jsx)("label",{htmlFor:"newFolder__name",children:"Folder Name:"}),Object(a.jsx)("input",{type:"text",className:"newFolder__input",name:"name",id:"name",onChange:function(t){return e.updateName(t.target.value)},required:!0}),this.state.name.touched&&Object(a.jsx)(T,{message:t}),Object(a.jsx)("button",{type:"submit",className:"newFolder__submit",children:"Save"})]})})})}}]),n}(o.Component));E.contextType=y,E.defaultProps={folders:[],content:"",name:"",error:null};var w=E,M=(n(54),n(55),function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.context.folders,n=void 0===t?[]:t;return Object(a.jsxs)("select",{className:"folderDropdown",onChange:function(t){return e.props.updateFolderId(t.target.value)},required:!0,children:[Object(a.jsx)("option",{value:"",children:"Select a Folder"}),n.map((function(e){return Object(a.jsx)("option",{value:e.id,className:"folderOption",children:e.name},e.id)}))]})}}]),n}(r.a.Component));M.contextType=y;var L=M,q=n(25),B=n.n(q),R=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).updateFolderId=function(e){a.setState({folderId:{value:e,touched:!0}})},a.handleClickCancel=function(){a.props.history.push("/")},a.state={name:{value:" ",touched:!1},modified:" ",content:{value:" ",touched:!1},folderId:{value:" ",touched:!1}},a}return Object(f.a)(n,[{key:"updateName",value:function(e,t){this.setState({name:{value:e,touched:!0}}),this.updateModified(t)}},{key:"updateModified",value:function(e){this.setState({modified:e})}},{key:"updateContent",value:function(e,t){this.setState({content:{value:e,touched:!0}}),this.updateModified(t)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={name:this.state.name.value,modified:this.state.modified,content:this.state.content.value,folderId:this.state.folderId.value};this.context.addNote(t),this.props.history.push("/")}},{key:"timeStamp",value:function(){B()().toDate()}},{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least three characters":void 0}},{key:"validateContent",value:function(){if(0===this.state.content.value.trim().length)return"Content is required for note creation"}},{key:"validateFolderId",value:function(){if(null===this.state.folderId.value)return"Picking a folder is required"}},{key:"render",value:function(){var e=this,t=this.validateName(),n=this.validateContent(),o=this.validateFolderId(),r=B()().toDate();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("form",{className:"addNote",onSubmit:function(t){return e.handleSubmit(t)},children:Object(a.jsxs)(A,{children:[Object(a.jsx)("h2",{children:"Add a new note"}),Object(a.jsx)("div",{className:"addNote__input",children:"* fields are required"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"nameInput",children:"Name: "}),Object(a.jsx)("input",{type:"text",className:"addNote__name",name:"name",id:"name",onChange:function(t){return e.updateName(t.target.value,r)},required:!0}),this.state.name.touched&&Object(a.jsx)(T,{message:t})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"contentInput",children:"Content: "}),Object(a.jsx)("input",{type:"text",className:"addNote__content",name:"content",id:"noteContent",onChange:function(t){return e.updateContent(t.target.value,r)},required:!0}),this.state.name.touched&&Object(a.jsx)(T,{message:n})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"folderInput",children:"Choose a Folder: "}),Object(a.jsx)(L,{updateFolderId:this.updateFolderId}),this.state.folderId.touched&&Object(a.jsx)(T,{folderIdError:o})]}),Object(a.jsx)("button",{type:"submit",className:"addNote__button",children:"Save"})]})})})}}]),n}(o.Component);R.contextType=y,R.defaultProps={folders:[],content:"",name:"",error:null};var J=R,K=(n(57),function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={notes:[],folders:[]},e.handleDeleteNote=function(t){var n=e.state.notes.filter((function(e){return e.id!==t}));e.setState({notes:n})},e.addFolder=function(t){fetch("".concat(C.a.API_ENDPOINT,"/folders"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t})}).then((function(e){return e.json()})).then((function(t){var n=[].concat(Object(h.a)(e.state.folders),[t]);e.setState({folders:n}),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e.addNote=function(t){fetch("".concat(C.a.API_ENDPOINT,"/notes"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){var n=[].concat(Object(h.a)(e.state.notes),[t]);e.setState({notes:n}),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(C.a.API_ENDPOINT,"/notes")),fetch("".concat(C.a.API_ENDPOINT,"/folders"))]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then((function(e){return Promise.reject(e)})):n.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var n=Object(u.a)(t,2),a=n[0],o=n[1];e.setState({notes:a,folders:o})})).catch((function(e){console.error({error:e})}))}},{key:"renderNavRoutes",value:function(){return Object(a.jsxs)(a.Fragment,{children:[["/","/folder/:folderId"].map((function(e){return Object(a.jsx)(p.b,{exact:!0,path:e,component:k},e)})),Object(a.jsx)(p.b,{path:"/note/:noteId",component:I}),Object(a.jsx)(p.b,{path:"/add-folder",component:w}),Object(a.jsx)(p.b,{path:"/add-note",component:J})]})}},{key:"renderMainRoutes",value:function(){return Object(a.jsxs)(a.Fragment,{children:[["/","/folder/:folderId"].map((function(e){return Object(a.jsx)(p.b,{exact:!0,path:e,component:D},e)})),Object(a.jsx)(p.b,{path:"/note/:noteId",component:S})]})}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.handleDeleteNote,addFolder:this.addFolder,addNote:this.addNote};return Object(a.jsx)(y.Provider,{value:e,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("nav",{className:"App__nav",children:this.renderNavRoutes()}),Object(a.jsx)("header",{className:"App__header",children:Object(a.jsxs)("h1",{children:[Object(a.jsx)(l.b,{to:"/",children:"Noteful"})," ",Object(a.jsx)(v.a,{icon:"check-double"})]})}),Object(a.jsx)("main",{className:"App__main",children:this.renderMainRoutes()})]})})}}]),n}(o.Component));K.defaultProps={folders:[],content:"",name:"",error:null};var Y=K;i.b.add(d.c,d.b,d.d,d.a),s.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(Y,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.f0c0545e.chunk.js.map